<html>
	<head>
		<title>Rummy</title>
		<script type="module" src="js/index.js"></script>
		<script>
			let settingsHidden = true;

			function toggleSettings() { //finds the class with the name settings and toggles its visibility
				if(settingsHidden==false){
					var x = document.getElementById("settings")
					x.style.display = "none";
					document.getElementsByClassName("toolbar").item(0).style.display = "initial";
					settingsHidden=true;
				}
				else{
					var x = document.getElementById("settings");
					x.style.display = "initial";
					document.getElementsByClassName("toolbar").item(0).style.display = "none";
					settingsHidden=false;
				}
			}
		</script>
		<link rel="stylesheet" href="css/index.css">
		<link rel="stylesheet" href="css/card.css">
		<link rel="stylesheet" href="css/controls.css">
		<link rel="stylesheet" href="themes/front/minimal/front-minimal.css">
		<link rel="stylesheet" href="themes/back/minimal/back-minimal.css">
		<link rel="stylesheet" href="themes/back/minimal/Black.css" id="back">
	</head>
	<body class="Red">
		<div id="board" class="hidden"></div>
		<div class="toolbar">
			<button onclick="toggleSettings()">Settings</button>
			<a href="help.html" target="_blank" rel="noopener noreferrer"><button id="help-button">Help</button></a> <!--Button acts as a link to help page-->
		</div>
		<div class="controls">
			<button id="main-action-button" data-action="none"></button>
		</div>
		<div id="lobby">
			<div class="lobby-logo">Super Rummy</div>
			<div class="lobby-code">--- ---</div>
			<table class="lobby-players"></table>
			<div class="lobby-options">
				<button id="remove-ai-button" disabled>â€”</button>
				<button id="add-ai-button">Add AI</button>
				<button id="lobby-primary" class="primary">Join Game</button>
			</div>
		</div>
		<div id="settings">
			<button id="close-settings-button" onclick="toggleSettings()">Close</button>
			<div class="settings-preview Red">
				<div class="card face-down"></div>
			</div>
			<h1>Display Settings</h1>
			<p>Background Color:</p>
			<button class="colorButton">Blue</button>
			<button class="colorButton">Red</button>
			<button class="colorButton">Green</button>
			<button class="colorButton">Orange</button>
			<button class="colorButton">Pink</button>
			<button class="colorButton">Purple</button>
			<button class="colorButton">Brown</button>
			<button class="colorButton">Black</button>
			<button class="colorButton">Gray</button>
			<button class="colorButton">Yellow</button>
			<!--allows users to change the color of the background to those defined above, but not after game starts -->
			<script>
				let z = document.querySelectorAll("body, .settings-preview");
				let currentColor = "Red";
				const colorButtons = [...document.querySelectorAll('.colorButton')];
				document.addEventListener('click', e => {
				if (!colorButtons.includes(e.target)) return;
					z.forEach(x => x.classList.replace(currentColor,e.target.textContent));
					currentColor = e.target.textContent;
				});

				var x = document.getElementById("settings");
				x.style.display = "none"; //makes settings invisible
			</script>
			<br>
			<p>Card Color:</p>
			<button class="cardButton">Blue</button>
			<button class="cardButton">Red</button>
			<button class="cardButton">Green</button>
			<button class="cardButton">Orange</button>
			<button class="cardButton">Pink</button>
			<button class="cardButton">Purple</button>
			<button class="cardButton">Brown</button>
			<button class="cardButton">Black</button>
			<button class="cardButton">Gray</button>
			<button class="cardButton">Yellow</button>
			<script> //does similar to above but this time for card back customization
				const cardButtons = [...document.querySelectorAll('.cardButton')];
				document.addEventListener('click', e => {
				let cardColor = e.target.textContent;
				if (!cardButtons.includes(e.target)) return;
					console.log(cardColor);
					document.getElementById("back").href = "themes/back/minimal/" + cardColor + ".css";
				});
			</script>
			<h1>Game Settings</h1>
			<p>Name:</p>
			<input class="restricted-setting" id="name-field" placeholder="Display Name" autocapitalize="true" autocomplete="nickname">
			<button id="set-name-button" class="primary restricted-setting" disabled>Set</button>
			<div id="game-settings"></div>
		</div>
	</body>
</html>
